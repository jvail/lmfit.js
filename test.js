var lmfit = require('./lmfit.js');
  
/*
  data = {
      f: function (){}  model function
      n: 0              no. of params
    , par:[]            initial param guess
    , m: 0              no. of data points
    , t: []             array x-axis points
    , y: []             array y-axis points
  }
*/

var data = {    
    f: function(t, p) {
        return p[0] / (1 + p[1] * Math.exp(-p[2] * t));
    }
  , n: 3 
  , par: new Float64Array(3)
  , m: 286
  , t: new Float64Array(286)
  , y: new Float64Array(286)
}

data.par[0] = 5.0;
data.par[1] = 1.0;
data.par[2] = 0.09;

for (var i = 0; i < data.m; i++)
  data.t[i] = i;

var vals = [109.25, 109.13, 112.67, 117.50, 122.78, 122.67, 122.56, 128.82, 134.56, 139.92, 143.97, 148.23, 151.35, 158.73, 158.60, 162.71, 169.55, 173.16, 176.13, 175.94, 175.78, 178.52, 183.95, 187.92, 193.51, 199.56, 207.02, 206.74, 206.56, 211.66, 215.88, 217.72, 224.01, 226.18, 225.85, 228.63, 233.95, 242.19, 251.13, 259.87, 259.34, 259.03, 258.79, 258.54, 258.27, 258.00, 257.75, 263.84, 263.48, 267.34, 275.99, 275.54, 275.31, 275.10, 274.85, 274.59, 274.36, 274.17, 274.00, 273.86, 273.74, 273.61, 273.40, 273.24, 273.06, 272.84, 272.61, 272.33, 277.94, 279.69, 281.59, 283.74, 286.13, 288.96, 291.10, 290.62, 290.22, 289.97, 289.73, 292.85, 295.90, 299.10, 298.54, 298.22, 301.83, 301.44, 301.27, 301.12, 300.98, 300.82, 300.67, 300.48, 300.23, 299.99, 299.74, 299.49, 299.27, 299.04, 298.81, 298.53, 298.26, 297.98, 297.69, 307.03, 313.90, 313.26, 322.84, 322.20, 330.83, 339.26, 338.57, 347.60, 346.97, 346.48, 346.03, 345.50, 344.98, 344.45, 356.25, 370.69, 390.58, 403.62, 402.81, 424.34, 423.58, 443.80, 480.80, 513.14, 535.10, 579.02, 628.29, 656.08, 683.65, 738.12, 792.43, 851.98, 900.99, 939.26, 937.28, 935.56, 934.00, 932.12, 930.34, 1002.67, 1070.07, 1121.41, 1180.74, 1250.64, 1306.87, 1304.18, 1301.67, 1374.58, 1371.66, 1368.93, 1366.27, 1363.74, 1487.04, 1599.14, 1749.86, 1880.15, 2008.45, 2128.30, 2239.11, 2384.47, 2547.31, 2736.04, 2945.15, 3149.37, 3365.67, 3463.03, 3588.38, 3721.68, 3834.23, 3825.55, 3976.97, 4166.68, 4362.63, 4588.89, 4791.41, 4925.78, 5085.76, 5310.68, 5469.44, 5652.27, 5822.81, 5949.53, 6137.81, 6326.74, 6433.06, 6604.77, 6853.34, 7105.82, 7326.61, 7397.44, 7457.64, 7590.31, 7718.90, 7796.00, 7958.50, 8123.38, 8335.15, 8569.42, 8743.80, 8942.68, 9180.54, 9413.48, 9628.89, 9820.79, 9988.28, 10169.81, 10388.90, 10609.84, 10806.50, 10964.82, 11172.70, 11325.08, 11497.99, 11678.89, 11813.58, 11947.77, 11998.49, 12141.44, 12291.78, 12386.34, 12538.91, 12668.18, 12767.90, 12851.56, 12906.21, 12963.69, 13105.36, 13272.26, 13322.15, 13357.12, 13540.35, 13697.76, 13845.35, 13926.63, 14066.55, 14246.83, 14410.04, 14582.58, 14572.12, 14552.68, 14489.33, 14394.57, 14277.25, 14159.27, 14255.43, 14364.97, 14525.98, 14568.02, 14569.07, 14592.05, 14756.08, 14784.48, 14760.59, 14738.14, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03, 14717.03];
for (var i = 0; i < data.m; i++)
  data.y[i] = vals[i];

var ret = lmfit.fit(data);
console.log(ret);